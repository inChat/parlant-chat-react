<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SEP - Full Screen</title>

  <!-- Import map to resolve bare specifiers -->
  <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react",
        "react-dom": "https://esm.sh/react-dom",
        "react-dom/client": "https://esm.sh/react-dom/client",
        "react/jsx-runtime": "https://esm.sh/react/jsx-runtime",
        "parlant-chat-react": "https://inchat.design/parlant-chat-react/parlant-chat-react.js"
      }
    }
  </script>

  <!-- Load the Parlant Chat React styles -->
  <link rel="stylesheet" href="https://inchat.design/parlant-chat-react/parlant-chat-react.css">

  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
      overflow: hidden;
    }

    /* Full screen chat styling */
    #app .parlant-chatbox-wrapper {
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
      width: 100vw !important;
      height: 100vh !important;
      border: none !important;
      border-radius: 0 !important;
      box-shadow: none !important;
      z-index: 9999 !important;
      max-width: none !important;
      background: #C0C0C0 !important;
    }

    #app .parlant-chatbox {
      height: 100vh !important;
      width: 100vw !important;
      border-radius: 0 !important;
      max-height: none !important;
      margin: 0 auto !important;
    }

    #app .parlant-chatbox > form {
      max-width: none !important;
    }

    #app .parlant-messages-area {
      height: calc(100vh - 120px) !important;
      max-height: none !important;
    }

    /* Hide popup button since we're in full screen */
    .parlant-popup-button {
      display: none !important;
    }

    /* Custom styling for better full screen experience */
    .parlant-chatbox-header {
      background: #007bff !important;
      color: white !important;
      padding: 20px !important;
      text-align: center !important;
    }

    .parlant-chatbox-header h3 {
      margin: 0 !important;
      font-size: 1.5rem !important;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <!-- Load the app as a module -->
  <script type="module">
    // Import React and the Parlant widget
    import React from 'react';
    import ReactDOM from 'react-dom/client';
    import ParlantChatbox, { createSectionAwareHeader } from 'parlant-chat-react';

    const { createElement: h } = React;
    const { createRoot } = ReactDOM;

    const chatboxOptions = {
      server: 'https://polly.inchat.design',
      agentId: 'ng3x8f7Dib',
      agentName: "Nalcom",
      chatDescription: "Figuring out ADHD starts with a chat...",
      float: false,
      components: {
        header: createSectionAwareHeader()
      },
      classNames: {
        chatboxWrapper: 'parlant-chatbox-wrapper',
        chatbox: 'parlant-chatbox',
        messagesArea: 'parlant-messages-area',
        chatboxHeader: 'parlant-chatbox-header'
      }
    };

    if (window.location.hostname === '' || window.location.hostname === 'localhost') {
      chatboxOptions.server = 'http://localhost:8800';
    } else {
      chatboxOptions.server = 'https://polly.inchat.design';
    }

    function App() {
      return h('div', { id: 'app' },
        h(ParlantChatbox, chatboxOptions)
      );
    }

    // Render the app
    const root = createRoot(document.getElementById('root'));
    root.render(h(App));
  </script>
</body>
</html>
